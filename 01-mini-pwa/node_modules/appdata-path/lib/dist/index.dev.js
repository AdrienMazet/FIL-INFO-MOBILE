"use strict";

var _require = require("os"),
    platform = _require.platform,
    homedir = _require.homedir;

var _require2 = require("path"),
    join = _require2.join;

function getForWindows() {
  return join(homedir(), "AppData", "Roaming");
}

function getForMac() {
  return join(homedir(), "Library", "Application Support");
}

function getForLinux() {
  return join(homedir(), ".config");
}

function getFallback() {
  if (platform().startsWith("win")) {
    // Who knows, maybe its win64?
    return getForWindows();
  }

  return getForLinux();
}

function getAppDataPath(app) {
  var appDataPath = process.env["APPDATA"];

  if (appDataPath === undefined) {
    switch (platform()) {
      case "win32":
        appDataPath = getForWindows();
        break;

      case "darwin":
        appDataPath = getForMac();
        break;

      case "linux":
        appDataPath = getForLinux();
        break;

      default:
        appDataPath = getFallback();
    }
  }

  if (app === undefined) {
    return appDataPath;
  }

  var normalizedAppName = appDataPath !== homedir() ? app : "." + app;
  return join(appDataPath, normalizedAppName);
}

module.exports = Object.assign(getAppDataPath, {
  getAppDataPath: getAppDataPath,
  "default": getAppDataPath
});